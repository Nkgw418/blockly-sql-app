<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Blockly SQL Abfrage Generator</title>
		
        <!-- Adding Blockly [DEBUG] (Google-Closure-Library is needed!) -->
        <script type="text/javascript" src="../common/libs/blockly/blockly_uncompressed.js"></script>
        <script type="text/javascript" src="../common/libs/blockly/blocks_compressed.js"></script>
        <script type="text/javascript" src="../common/libs/blockly/msg/messages.js"></script>
        <!-- [DEBUG] -->

        <!-- Adding Blockly [RELEASE] -->
        <!-- <script type="text/javascript" src="../common/libs/blockly/blockly_compressed.js"></script>
        <script type="text/javascript" src="../common/libs/blockly/blocks_compressed.js"></script>
        <script type="text/javascript" src="../common/libs/blockly/msg/js/en.js"></script> -->
        <!-- [RELEASE] -->

        <!-- Adding Blockly plugins -->
        <script type="text/javascript" src="../common/modules/blockly-colour-gradient/colour-gradient.js"></script>
        <script type="text/javascript" src="../common/modules/help/help.js"></script>
        <script type="text/javascript" src="../common/modules/blockly-type-indicator/typeIndicator.js"></script>
        <script type="text/javascript" src="../common/modules/blockly-sql-generator/sql.js"></script>
        <script type="text/javascript" src="../common/modules/blockly-sql-generator/blocks/commands.js"></script>
        <script type="text/javascript" src="../common/modules/blockly-sql-generator/blocks/functions.js"></script>
        <script type="text/javascript" src="../common/modules/blockly-sql-generator/blocks/operators.js"></script>
        <script type="text/javascript" src="../common/modules/blockly-sql-generator/blocks/tables.js"></script>
        <script type="text/javascript" src="../common/modules/blockly-sql-generator/blocks/values.js"></script>
        
        <!-- Adding SQLBlockly Addon -->
		<script type="text/javascript" src="dist/SQLBlockly.min.js"></script>
        
        <!-- Adding ACE library (Code Editor) -->
        <script type="text/javascript" src="../common/libs/ace/ace.js"></script>

        <!-- Including StyleSheets -->
        <link rel="stylesheet" type="text/css" href="css/style.css">
	</head>
    
    <body onload="main()" style="width: 100vw; height: 100vh; margin: 0; padding: 0;">

        <!-- Help Container -->
        <div id="help">
            <div id="sqlHelpBar">
                <a title="Anzeige schliessen" class="closeBtn" onclick="closeHelp();">×</a>
                <h4 class="headBar">Help</h4>
            </div>
            <div id="helpcontent"></div>
        </div>

        <div id="wrapper" style="width: 100vw; height: 100vh;">       
            
            <!-- Header -->
            <div id="head" style="padding-bottom: 3.5em;">
                <img src="../common/img/p2fs.png" alt="SQL GUI" style="float: left;"> 
                
                <div style="float: left; margin: 1.25em; padding-left: 1em;">
                    <button class="sqlBtn" onclick="editStatement();">Edit SQL Statement</button>
                </div>
                
                <div style="float:right; border: 3px solid black; padding: 0.25em;">
                    <h5>ODBC - Data Sources</h5>
                    <select id="dataSourceNames" onchange="loadDatabaseStructure(this);"></select>
                    <button class="sqlBtn" onclick="openAddDataSource();">Add</button>
                    <button class="sqlBtn" onclick="removeDataSource();">Delete</button>
                    <button class="sqlBtn" onclick="openUpdateDataSource();">Update</button>
                </div>
            </div>

            <!-- Blockly Workspace -->
            <div id="blocklyDiv" style="width:100%; height:calc(100% - 88px)"></div>

            <!-- SQL Code Editor -->
            <div id="writeSQL">
                <div id="sqlEditorBar">
                    <a title="Close Statement box." class="closeBtn" onclick="closeCodeEditor();">×</a>
                    <h4 class="headBar">SQL Statement</h4>
                </div>
                
                <div id="sqlStatement" class="textual"></div>
                
                <img src="img/icons/help.png" class="helpicon" onmouseover="setTooltip();" onmouseout="closeTooltip();">
                <p id="tooltip" class ="tooltips"></p>
                
                <button id="parseSQLBtn" onclick="parsingSQL();" class="okayy">OK</button>
            </div>
            
            <!-- Error Box -->
            <div id="errorSQL">
                <div id="sqlErrorBar">
                    <a title="Close error box." class="closeBtn" onclick="closeErrorBox();">×</a>
                    <h4 class="headBar">Error Message</h4>
                </div>

                <textarea id="sqlErrorMessage" name="text" class="textual" readonly="readonly"></textarea>
                <button id="toblock" onclick="closeErrorBox();" class="okayy">OK</button>
            </div>

            <div id="addDSN">
                <div id="addDSNBar">
                    <a title="Close DSN box." class="closeBtn" onclick="closeAddDataSource();">×</a>
                    <h4 class="headBar">Add Data Source Name (ODBC)</h4>
                </div>

                 <form id="addDSNForm">
                    Data Source Name (DSN):<br>
                    <input type="text" name="dsn"><br>
                    Username:<br>
                    <input type="text" name="username"><br>
                    Password:<br>
                    <input type="password" name="password"><br><br>
                    <input type="button" value="Add" onclick="addDataSource();">
                </form> 
            </div>

            <div id="updateDSN">
                <div id="updateDSNBar">
                    <a title="Close DSN box." class="closeBtn" onclick="closeUpdateDataSource();">×</a>
                    <h4 class="headBar">Update Data Source Name (ODBC)</h4>
                </div>

                 <form id="updateDSNForm">
                    Username:<br>
                    <input type="text" name="username"><br>
                    Password:<br>
                    <input type="password" name="password"><br><br>
                    <input type="button" value="Update" onclick="updateDataSource();">
                </form> 
            </div>
            
            
        </div>
 
    </body>
</html>